<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="../lib/bootstrap.min.css">
		<link rel="stylesheet" href="../lib/jquery-ui.min.css">
		<link rel="stylesheet" href="./css/mapsearch.css">
		<link rel="stylesheet" href="./css/timeslider.css">
		<link rel="stylesheet" href="./css/gazetteersearch.css">
		<style>
		html, body{
			width: 100%;
			height: 100%;
		}

		.test{
			width: 100%;
			height: 100%;
		}
		
		.gazetteersearch-container{
			position: absolute;
			top: 300px;
			left: 700px;
			width: 400px;
			height: 100px;
		}
		</style>	
		<script src="../lib/jquery.min.js"></script>
		<script src="../lib/jquery-ui.min.js"></script>
		<script src="../lib/bootstrap.min.js"></script> 
		<script src="../lib/closure-library/closure/goog/base.js"></script>
		<script src="../lib/closure-library/closure/goog/deps.js"></script>
		<script src="../lib/ol-whitespace.js"></script>
		<script src="../src/settings.js"></script>
		<script src="../src/utils.js"></script>
		<script src="../src/validation.js"></script>
		<script src="../src/factory/mapsearchfactory.js"></script>
		<script src="../src/module/mapsearchmodule.js"></script>
		<script src="../src/tool/timeslidertool.js"></script>
		<script src="../src/tool/gazetteersearchtool.js"></script>
		<script>
			goog.require('goog.net.XhrIo');
			goog.require('goog.dom');
		</script>
	</head>
	<body>
	<div id="test">

	</div>
	
	
	<script type="text/javascript">
	var mapsearch = new vk2.module.MapSearchModule('test', {});
	var timeslider = new vk2.tool.TimeSlider('test');
	var gazetteer = new vk2.tool.GazetteerSearch('test');
	var url = 'http://localhost:8080/vkviewer/static/new/test_pages/wfs.xml';
	var parser = new ol.format.WFS(vk2.settings.WFS_PARSER_CONFIG['mtbows'])
	goog.net.XhrIo.send(url, goog.bind(function(e){
		var xhr = /** @type {goog.net.XhrIo} */ (e.target);
    	var data = xhr.getResponseXml() ? xhr.getResponseXml() : xhr.getResponseText();
    	xhr.dispose();
    	var features = parser.readFeatures(data);
		mapsearch.updateFeatures(features); 
		goog.events.listen(mapsearch, 'addmtb', function(event){
			console.log(event);
		});
		goog.events.listen(timeslider, 'timechange', function(event){
			console.log(event);
		});
		goog.events.listen(gazetteer, 'jumpto', function(event){
			console.log(event);
		});
	}));
	</script>
	
	</body>
</html>